<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mright.discuss.platform.dao.IBlogDao">
    <resultMap type="com.mright.discuss.platform.entity.po.Blog" id="blogMap">
        <result property="id" column="id" jdbcType="INTEGER"/>
        <result property="userId" column="user_id" jdbcType="INTEGER"/>
        <result property="title" column="title" jdbcType="VARCHAR"/>
        <result property="img" column="img" jdbcType="VARCHAR"/>
        <result property="introduction" column="introduction" jdbcType="VARCHAR"/>
        <result property="content" column="content" jdbcType="VARCHAR"/>
        <result property="createTime" column="create_time" jdbcType="TIMESTAMP"/>
        <result property="updateTime" column="update_time" jdbcType="TIMESTAMP"/>
        <result property="isDelete" column="is_delete" jdbcType="INTEGER"/>
    </resultMap>
    <sql id="base_sql">
        id, user_id, title, img, introduction, create_time, update_time, is_delete
    </sql>
    <insert id="add">
        insert into blog
        (user_id, title, img, introduction, content, create_time, update_time)
        values
        (#{userId}, #{title}, #{img}, #{introduction}, #{content}, now(), now())
    </insert>
    <select id="list" resultMap="blogMap">
        select <include refid="base_sql"/>
        from blog
        where
         is_delete = 0
        limit #{start}, #{size}
    </select>
    <select id="detail" resultMap="blogMap">
        select <include refid="base_sql"/>,content
        from blog
        where
        is_delete = 0
        and id = #{id}
    </select>

</mapper>
